<!DOCTYPE html>
{% load static %}
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{% static 'css/view_crop_data.css' %}">
    <title>www.crop_yield_prediction.com/view_crop_data/</title>
        <script>
        window.onload = function ()
       {
            var chart = new CanvasJS.Chart("chartContainer",
            {
                animationEnabled: true,
                theme: "light2",
                title:
                {
                    text: "Crop-wise Yield Data for District"
                },
                axisX:
                {
                title:"Crop"
                },
                axisY:
                {
                title:"Production"
                },
                data:
                [{
                    type: "column",
                    indexLabelFontSize: 10,
                    yValueFormatString: "##0.00\"%\"",
                    indexLabel: "{y}",
                dataPoints:
                [
                    {% for o in obj %}
                       {y: {{o.production}}, label: "{{o.crop}}"},
                    {% endfor %}
                ]
            }]
        });
        chart.render();
        }
    </script>
</head>
<body>
<div id="div1">
    <h1 style="animation: myanimation 10s infinite;padding:15px;">CROP YIELD PREDICTION AND EFFICIENT USE OF FERTILIZERS</h1>
</div>
<div id="div3">
    <div id="div2">
<!--    Home page icon to link starts-->
    <div class="custom_menu-btn">
        <button onclick="myFunction()" class="dropdown-btn">
            <span class="s-1"> </span>
            <span class="s-2"> </span>
            <span class="s-3"> </span>
        </button>
        <div id="myDropdown" class="dropdown-container">
            <a href="{% url 'home' %}">Home</a>
            <a href = "{% url 'dist_soiltype' %}">Add New District</a>
            <a href = "{% url 'soillist' %}">Add New Soil</a>
            <a href="{% url 'view_crop_data' %}">View Crop Details</a>
            <a href="{% url 'yield_data' %}">Yield Data Chart</a>
            <a href="{% url 'logout' %}">Logout</a>
        </div>
    </div>
    </div>
    <!--    Home page icon to link ends-->
    <form method="POST">
        {% csrf_token %}
        <center>
            <h1 style="text-align:center;color:white;">Graph for District with Yeild Details on Crop</h1><br>
            <label style="margin-left:430px;">District</label>
            <select name='distsoil'>
                <option disabled="true" selected>District</option>
                {% for i in list %}
                <option value="{{i.dist_name}}">{{i.dist_name}}</option>
                {% endfor %}
            </select>
            <input type="submit" id="sub">
            <center>
                <div id="div4">
                    <form method="POST">
                        {% csrf_token %}
                        <center>
                            <div id="chartContainer" style="height: 400px; width: 75%; margin-left:50px; margin-top:25px;"></div>
                            <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
                        </center>
                    </form>
                </div>
            </center>
        </center>
    </form>
</div>
<script>
/* When the user clicks on the button,
toggle between hiding and showing the dropdown content */
function myFunction() {
  document.getElementById("myDropdown").classList.toggle("show");
}

// Close the dropdown if the user clicks outside of it , .s-2, s-3
window.onclick = function(event) {
  if (!event.target.matches('.dropdown-btn') & !event.target.matches('.s-1') & !event.target.matches('.s-2') & !event.target.matches('.s-3')) {
    var dropdowns = document.getElementsByClassName("dropdown-container");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>
</body>
</html>